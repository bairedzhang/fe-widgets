<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<style>
    *{margin:0;padding:0;}
    ul li{list-style: none;margin:0;padding: 0;}

    .wrapper{width:960px;margin:50px auto;}
    #myCanvas{border:1px solid #ddd;padding:0;}
    .red{color:red;background-color:red;}
    .blue{color:blue;background-color: blue;}
    .yellow{color:yellow;background-color: yellow;}
    .black{color:black;background-color: black;}
    .colorbox ul li,
    .sizebox ul li{display: inline-block;width:236px;height:20px;margin:0;}
    .bt span{cursor:pointer;display:inline-block;padding:5px;border:1px solid #eee;border-radius:5px;marin:10px;height:30px;line-height: 30px;}
</style>
<script src="../core/jquery.js"></script>
<body>
<div class="wrapper">
    <div class="colorbox">
        <ul>
            <li class="red"></li>
            <li class="blue"></li>
            <li class="yellow"></li>
            <li class="black"></li>
        </ul>
    </div>
    <div class="sizebox"></div>
    <canvas id="myCanvas" width="960" height="500"></canvas>
    <div class="bt">
        <span class="clear">clear canvas</span>
        <span class="save">save canvas</span>
    </div>
</div>
<script type="text/javascript">

    var canvas=document.getElementById('myCanvas');
    var ctx=canvas.getContext('2d');
    var isDrawing = false;
    var startDraw = function(e){
        isDrawing = true;
        ctx.beginPath();
        ctx.moveTo(e.clientX-canvas.offsetLeft, e.clientY-canvas.offsetTop+window.scrollY);
    };
    var stopDraw = function(){
        isDrawing = false;
    };
    var draw = function(e){
        if(isDrawing){
            ctx.lineTo(e.clientX-canvas.offsetLeft, e.clientY-canvas.offsetTop+window.scrollY);
            ctx.stroke();
        }

    };
    canvas.onmousedown = startDraw;
    canvas.onmouseup = stopDraw;
    canvas.onmouseout = stopDraw;
    canvas.onmousemove = draw;


   /* var centerX = 150,
        centerY = 150,
        radius = 100,
        startAngle = 1.25*Math.PI,
        endAngle = 1.75*Math.PI;
    ctx.arc(centerX,centerY,radius,startAngle,endAngle);
    ctx.stroke();  */

    //ctx.strokeRect(0,10,100,200);

    /*var pos = {x:0,y:0};
    var draw= function(dest,time,cb){
        var fps = 20,
            limit = time/fps,
            xStep = dest.x/limit,
            yStep = dest.y/limit,
            x = xStep,
            y = yStep,
            animation = function(){
                ctx.lineTo(pos.x+x,pos.y+y);
                ctx.stroke();
                x+=xStep;
                y+=yStep;
                if(Math.abs(x)<Math.abs(dest.x)){
                    setTimeout(arguments.callee,50);
                }else{
                    ctx.lineTo(pos.x+dest.x,pos.y+dest.y);
                    ctx.stroke();
                    cb&&cb();
                }
            }
        setTimeout(function(){
           animation();
        },50);
    };
    ctx.lineCap = 'round';
    ctx.strokeStyle="grey";
    draw({x:100,y:100},500,function(){
        draw({x:100,y:-100},500,function(){
            pos.x = 200;
            pos.y = 0;
            draw({x:-200,y:0},500,function(){
               ctx.closePath();
               ctx.fillStyle="blue";
               ctx.fill();
               ctx.stroke();
            });
        });
    });

    var c1x = 100,
        c1y = 30,
        c2x = 250,
        c2y = 80,
        endx = 400,
        endy = 30,
        timer = 0;
    setTimeout(function(){
        ctx.moveTo(c1x,c1y);
        ctx.bezierCurveTo(c1x,c1y,c2x,c2y,endx,endy);
        ctx.stroke();
        c2y++;
        timer++;
        if(timer<100){
          setTimeout(arguments.callee,5)
        }
    },5)*/
    $('.colorbox ul li').click(function(){
       var color = $(this).attr('class');
        console.log(color);
        ctx.strokeStyle = color;
    });
    $('.clear').click(function(){
        ctx.clearRect(0,0,canvas.clientWidth,canvas.clientHeight);
    });
    $('.save').click(function(){
        var url = canvas.toDataURL();
        var img = new Image();
        img.src = url;
        $('body').append(img);
        //console.log(url);
    });
</script>
</body>
</html>